(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{13:function(e,t,a){},14:function(e,t,a){},15:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(7),c=a.n(o),i=(a(13),a(1)),l=a(2),s=a(5),u=Array.isArray,m=function(e){return function(t){var a=t.split(".");return function e(t,a){if(1===a.length)return{parentObject:t,propertyName:a[0],propertyValue:t[a[0]]};var n=Object(s.a)(a);return e(t[n.shift()],n)}(e,a)}},d=function(e){var t={},a=e,r=function(e){return function(n){var r,c=m(a)(e),i=c.parentObject,s=c.propertyName,d=c.propertyValue;console.log("pre-State",a),console.log("newState",n),"object"!==typeof(r=d)||u(r)||null===r?i[s]=n:i[s]=Object(l.a)(Object(l.a)({},i[s]),n),console.log("post-State",a),window.listeners=t,window.state=a,o(e)}},o=function(e){(function(e){return e.split(".").reduce((function(e,t,a){if(0===a)return[t];var n=e[a-1];return[].concat(Object(s.a)(e),[[[n],[t]].join(".")])}),[])})(e).forEach((function(e){var n=m(a)(e).propertyValue;t[e].forEach((function(e){e(n)}))}))};return function(e){var o=Object(n.useState)()[1];return Object(n.useEffect)((function(){return t[e]||(t[e]=[]),t[e].push(o),function(){t[e]=t[e].filter((function(e){return e!==o}))}}),[]),[m(a)(e).propertyValue,r(e)]}}({modern:{architect:"Frank Lloyd Wright",painter:"Gerhard Richter",sculptor:"Paul McCarthy",musician:"Bob Dylan"},classic:{architect:"Michelangelo",painter:"Michaelangelo",sculptor:"Michaelangelo",musician:"Fr\xe9d\xe9ric Fran\xe7ois Chopin"}}),p=function(e){return e[Math.floor(Math.random()*e.length)]},f=function(e){var t=d("modern"),a=Object(i.a)(t,2),n=a[0];a[1];return r.a.createElement("div",{className:"display-container"},r.a.createElement("h2",null,"Display"),r.a.createElement("p",null,"architect ",r.a.createElement("span",null,n.architect)),r.a.createElement("p",null,"musician ",r.a.createElement("span",null,n.musician)),r.a.createElement("p",null,"painter ",r.a.createElement("span",null,n.painter)))},E=function(e){var t=d("modern.architect"),a=Object(i.a)(t,2),n=a[0],o=(a[1],d("modern.musician")),c=Object(i.a)(o,2),l=c[0],s=(c[1],d("modern.painter")),u=Object(i.a)(s,2),m=u[0];u[1];return r.a.createElement("div",{className:"display-container"},r.a.createElement("h2",null,"Display"),r.a.createElement("p",null,"architect ",r.a.createElement("span",null,n)),r.a.createElement("p",null,"musician ",r.a.createElement("span",null,l)),r.a.createElement("p",null,"painter ",r.a.createElement("span",null,m)))},h=function(){var e=d("modern.architect"),t=Object(i.a)(e,2),a=t[0],n=t[1],o=d("modern.musician"),c=Object(i.a)(o,2),l=c[0],s=c[1],u=d("modern.painter"),m=Object(i.a)(u,2),f=m[0],E=m[1],h=d("modern"),v=Object(i.a)(h,2),b=(v[0],v[1]),y=function(){return p(["Frank Lloyd Wright","Oscar Niemeyer","Le Corbusier","Zaha Hadid"].filter((function(e){return e!==a})))},g=function(){return p(["Bob Dylan","Enya","Loreenna MacKennit","Elvis Presley"].filter((function(e){return e!==l})))},S=function(){return p(["Gerhard Richter","Pablo Picasso","Vincent Van Gogh","Salvador Dal\xed"].filter((function(e){return e!==f})))},j=y(),C=g(),O=S(),k={architect:"!"+y(),painter:"!"+S(),sculptor:"!Maria",musician:"!"+g()};return r.a.createElement("div",{className:"button-container"},r.a.createElement("button",{onClick:function(){return n(j)}},j),r.a.createElement("button",{onClick:function(){return s(C)}},C),r.a.createElement("button",{onClick:function(){return E(O)}},O),r.a.createElement("button",{onClick:function(){return b(k)}},"everything!"))},v=function(){return r.a.createElement("div",null,r.a.createElement("article",null,r.a.createElement("h1",null,"Store Avan\xe7ada"),r.a.createElement("p",null,"Nessa abordagem a store n\xe3o precisa ser dividida em section, e os componentes podem ser registrar a propriedades espec\xedficas da store. Isso deixa o processo mais eficiente, j\xe1 que os componentes s\xf3 precisam re-renderizar se propriedades relevantes forem atualizadas."),r.a.createElement(h,null),r.a.createElement("section",{className:"display-section"},r.a.createElement(f,null),r.a.createElement(E,null)),r.a.createElement("h2",null,"Como utilizar"),r.a.createElement("h3",null,"Criando a store"),"1. Execute createStore paasando o estado inicial.",r.a.createElement("code",null,r.a.createElement("pre",null,"const state = {\n  name: 'John Doe',\n  ...\n}\nreturn default createStore(state)")),r.a.createElement("h3",null,"Utilizando a store"),"1. Importe o Custom Hook criado e use-o como o useState, exceto por uma diferen\xe7a: ",r.a.createElement("em",null,"Ao inv\xe9s de passar o state inicial como argumento, passe a uma string indicando qual propriedade o componente utilizar\xe1. Por exemplo, para ouvir a propriedade nome:"),r.a.createElement("code",null,r.a.createElement("pre",null,"const MyComponent = () => {\n  const [name, setName] = useMyStore('name')\n  return <div>{name}</div>\n}")),'2. Ao declarar a propriedade a ouvir, pode-se usar "." para se subscrever a propriedades nested na store. Por exemplo, para ouvir a propriedade cidade, filho de estado, filho de pais:',r.a.createElement("code",null,r.a.createElement("pre",null,"const MyComponent = () => {\n  const [cidade, setCidade] = useMyStore('pais.estado.cidade')\n  return <div>{cidade}</div>\n}"))))},b=function(){var e={},t=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"_";return function(n){e[t].state=Object(l.a)(Object(l.a)({},e[t].state),n),a(t)}},a=function(t){e[t].listeners.forEach((function(a){a(e[t].state)}))};return[function(a){var r=Object(n.useState)()[1];return Object(n.useEffect)((function(){return e[a].listeners.push(r),function(){e[a].listeners=e[a].listeners.filter((function(e){return e!==r}))}}),[]),[e[a].state,t(a)]},function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"_",a=arguments.length>1?arguments[1]:void 0;e[t]={listeners:[],state:a}}]}(),y=Object(i.a)(b,2),g=y[0],S=y[1];S("modern",{architect:"Frank Lloyd Wright",painter:"Gerhard Richter",sculptor:"Paul McCarthy",musician:"Bob Dylan"}),S("classic",{architect:"Michelangelo",painter:"Michaelangelo",sculptor:"Michaelangelo",musician:"Fr\xe9d\xe9ric Fran\xe7ois Chopin"});var j=g,C=function(e){return e[Math.floor(Math.random()*e.length)]},O=function(e){var t=e.sectionName,a=j(t),n=Object(i.a)(a,2),o=n[0];n[1];return r.a.createElement("div",{className:"display-container"},r.a.createElement("h2",null,"Display: ",t),r.a.createElement("p",null,"architect ",r.a.createElement("span",null,o.architect)),r.a.createElement("p",null,"musician ",r.a.createElement("span",null,o.musician)),r.a.createElement("p",null,"painter ",r.a.createElement("span",null,o.painter)))},k=function(){var e=j("modern"),t=Object(i.a)(e,2),a=t[0],n=t[1],o=C(["Frank Lloyd Wright","Oscar Niemeyer","Le Corbusier","Zaha Hadid"].filter((function(e){return e!==a.architect}))),c=C(["Bob Dylan","Enya","Loreenna MacKennit","Elvis Presley"].filter((function(e){return e!==a.musician}))),l=C(["Gerhard Richter","Pablo Picasso","Vincent Van Gogh","Salvador Dal\xed"].filter((function(e){return e!==a.painter})));return r.a.createElement("div",{className:"button-container"},r.a.createElement("button",{onClick:function(){return n({architect:o})}},o),r.a.createElement("button",{onClick:function(){return n({musician:c})}},c),r.a.createElement("button",{onClick:function(){return n({painter:l})}},l))},M=function(){return r.a.createElement("div",null,r.a.createElement("article",null,r.a.createElement("h1",null,"Store B\xe1sica"),r.a.createElement("p",null,"Nesta abordagem, cada store \xe9 dividida em sections (o dom\xednio seria uma section, os dados do projeto seriam outra, o hist\xf3rico outra, etc)."),r.a.createElement("p",null,"O componente se registra n\xe3o somente numa store, mas a uma ",r.a.createElement("em",null,"section")," de uma store. O motivo disso \xe9 performance: todos os componentes que subscrevem a uma section s\xe3o renderizados novamente sempre que a section sofrer altera\xe7\xe3o."),r.a.createElement("p",null,'Neste exemplo existe uma store ("useArtistStore") com duas sections ("modern" e "classic"). Ao clicar os bot\xf5es abaixo, voc\xea aletarar\xe1 a section modern, o que causar\xe1 o rerender dos dois primeiros displays abaixo.'),r.a.createElement("p",null,"Note ques os displays modern est\xe3o em branches diferentes do react Component (n\xe3o s\xe3o descendentes um do outro), e n\xe3o est\xe3o elevando seu state a nenhum componente ancestral."),r.a.createElement("p",null,'Voc\xea pode utilizar as ferramentas de desenvolvedor e conferir que altera\xe7\xe3o na section "modern" n\xe3o causam rerender no display "classic".')),r.a.createElement(k,null),r.a.createElement("section",{className:"display-section"},r.a.createElement(O,{sectionName:"modern"}),r.a.createElement(O,{sectionName:"modern"}),r.a.createElement(O,{sectionName:"classic"})),r.a.createElement("h2",null,"Como utilizar"),r.a.createElement("h3",null,"Criando a Store"),"1. Execute createStore para gerar duas fun\xe7\xf5es: a primeira \xe9 o Custom Hook a ser usado pelos componentes, a segunda \xe9 uma fun\xe7\xe3o de load para carregar as sections da store.",r.a.createElement("code",null,r.a.createElement("pre",null,"const [useMyStore, load] = createStore()")),"2. Use a fun\xe7\xe3o de load, passando uma string como nome e um objecto como state inicial.",r.a.createElement("code",null,r.a.createElement("pre",null,"load('mySection', {\n  name: 'John Doe',\n  ...\n})")),"3. E por fim exporte a fun\xe7\xe3o Custom Hook gerada no primeiro passo.",r.a.createElement("h3",null,"Utilizando a Store"),"1. Importe o Custom Hook criado e use-o como o useState, exceto por uma diferen\xe7a: ",r.a.createElement("em",null,"Ao inv\xe9s de passar o state inicial como argumento, passe a string que indica qual section quer subscrever."),r.a.createElement("code",null,r.a.createElement("pre",null,"const MyComponent = () => {\n  const [section, setSection] = useMyStore('mySection')\n  return <div>{section.name}</div>\n}")),"2. Note que a vari\xe1vel section representa todo o objeto da mySection. N\xe3o \xe9 poss\xedvel subscrever a uma propriedade individual. 3. Para setar uma propriedade, \xe9 necess\xe1rio passar um objeto contendo a propriedade a ser modificada.",r.a.createElement("code",null,r.a.createElement("pre",null,"const MyComponent = () => {\n  const [section, setSection] = useMyStore('mySection')\n  return (\n    <div>\n      <div>{section.name}</div>\n      <button\n        onCLick={() => setSection({ name: 'Pedro Pedreiro' })}\n      >\n        Alterar Nome\n      </button>\n    </div>\n  )\n}")))},N=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],o=t[1];return r.a.createElement("div",null,r.a.createElement("h1",null,"Estudo de persist\xeancia com React Hooks"),r.a.createElement("p",null,"Essas duas varia\xe7\xf5es se baseiam no artigo ",r.a.createElement("a",{href:"https://medium.com/javascript-in-plain-english/state-management-with-react-hooks-no-redux-or-context-api-8b3035ceecf8#:~:text=Sharing%20states&text=To%20work%20a%20solution%20which,functions%20fired%20and%20get%20updated."},"State Management with React Hooks \u2014 No Redux or Context API")," por Andr\xe9 Giardi. Especificamente, a ideia de um custom hook capturar a fun\xe7\xe3o de set do useState e coloc\xe1-la num array persistido por closure."),r.a.createElement("p",null,"A vers\xe3o b\xe1sica divide a store em sections: toda vez que uma section sofrer altera\xe7\xe3o, todos os componentes subscritos \xe0quela section s\xe3o atualizados."),r.a.createElement("p",null,"A vers\xe3o avan\xe7ada permite que um componente subscreva a propriedades espec\xedficas da store, mas atualmente possui um problema: componentes s\xf3 respondem a altera\xe7\xf5es feitas por componentes subscritos no mesmo n\xedvel - ou seja, um componente registrado em 'a.b' e outro registrado em 'a' n\xe3o desencadeiam altera\xe7\xe3o um no outro, o que \xe9 inaceit\xe1vel. Acredito ser decorrente da Lei dos Hooks, mas n\xe3o achei a causa do problema."),r.a.createElement("p",null,"Escolha uma se\xe7\xe3o para testar."),r.a.createElement("div",{className:"button-container"},r.a.createElement("button",{onClick:function(){return o("basic")}},"b\xe1sico"),r.a.createElement("button",{onClick:function(){return o("advanced")}},"avan\xe7ado")),"basic"===a?r.a.createElement(M,null):null,"advanced"===a?r.a.createElement(v,null):null)};a(14);var x=function(){return r.a.createElement(N,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},8:function(e,t,a){e.exports=a(15)}},[[8,1,2]]]);
//# sourceMappingURL=main.cf257bb0.chunk.js.map